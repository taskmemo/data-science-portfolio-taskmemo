## data description
### dataset shape
train:  (1710670, 9)
test:  (320, 9)
location:  (63, 4)

## table description
| カラム名 | 型 | 説明 |
|---|---:|---|
| TRIP_ID | int | 各旅行の一意の識別子 |
| CALL_TYPE | object | サービス要求方法。A=中央から発送、B=特定のスタンドでの直接要求、C=その他（路上等） |
| ORIGIN_CALL | float64 / NULL | CALL_TYPE='A' の場合に顧客を識別する電話番号ID。その他はNULL |
| ORIGIN_STAND | float64 / NULL | CALL_TYPE='B' の場合に乗車の出発スタンドID。その他はNULL |
| TAXI_ID | int64 | 乗車を行ったタクシー運転手の一意識別子 |
| TIMESTAMP | int64 | 旅行の開始時刻を表すUnixタイムスタンプ（秒単位） |
| DAYTYPE | object | 曜日タイプ。B=祝日など特別日、C=タイプBの前日、A=通常日（平日・週末等） |
| MISSING_DATA | bool | GPSデータが完全ならFALSE、1つ以上の位置が欠落している場合はTRUE |
| POLYLINE | object | 15秒ごとの[経度, 緯度]ペアのリストを文字列化したもの（先頭と末尾は[]）。最初が開始点、最後が目的地 |

## base model process
- データ整形
    - 特徴量の生成
        - 座標リストを分割して、出発点と目的地を抽出
        - ステップ数
        - 途中までの走行距離（testデータの分布から30ステップまでで区切る。）
        - 走行時間（ステップ数×15秒）
        - 平均速度（途中までの走行距離÷走行時間）
    - 欠損値・外れ値の処理
        - POLYLINEが空のデータを削除
        - 移動距離が0のデータを削除
- モデル構築（緯度・経度用の二つ）
    - 目的変数: 最終地点の緯度・経度
    - 説明変数: 上記で作成した特徴量（x_reduced）
    - モデル: RandomForestRegressor, LinearRegression

## notes 
- ハーヴェサイン距離は評価指標として準備されているため、学習用カラムとしては使えないが、途中までの距離として活用している。
- 欠損値の扱いについては、緯度・経度の目的変数に欠損があるデータは削除し、説明変数に欠損があるデータは一旦無視してモデルを構築した。
- モデルの構築に関しては、緯度と経度のそれぞれに対してモデルを作成している。

## todo
- モデルの改良
    - カテゴリ変数の活用
        - CALL_TYPE, DAYTYPEのエンコーディング
        - TIMESTAMPから時間に関する特徴量の生成 
    - ハイパーパラメータチューニング
    - 他のモデルの検討
        - 勾配ブースティング系モデル（LightGBM, XGBoostなど）
- 実装の精緻化
    - LightGBM & XGBoostのブレンディング実装
    - 特徴量の追加
        - 位置情報を活用した特徴量（例: 都市部か郊外か、近くのランドマークなど）
        - 天候情報や交通情報の統合
- MLflowなどを活用した実装の自動化・効率化
    - 実験管理